[{"content":"æ•°æ®æŸ¥è¯¢ go build è¿™ä¸ªå‘½ä»¤ä¸»è¦ç”¨äºç¼–è¯‘ä»£ç ã€‚åœ¨åŒ…çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè‹¥æœ‰å¿…è¦ï¼Œä¼šåŒæ—¶ç¼–è¯‘ä¸ä¹‹ç›¸å…³è”çš„åŒ…ã€‚\nå¦‚æœæ˜¯æ™®é€šåŒ…ï¼Œå°±åƒæˆ‘ä»¬åœ¨1.2èŠ‚ä¸­ç¼–å†™çš„mymathåŒ…é‚£æ ·ï¼Œå½“ä½ æ‰§è¡Œgo buildä¹‹åï¼Œå®ƒä¸ä¼šäº§ç”Ÿä»»ä½•æ–‡ä»¶ã€‚å¦‚æœä½ éœ€è¦åœ¨$GOPATH/pkgä¸‹ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ï¼Œé‚£å°±å¾—æ‰§è¡Œgo installã€‚\nå¦‚æœæ˜¯mainåŒ…ï¼Œå½“ä½ æ‰§è¡Œgo buildä¹‹åï¼Œå®ƒå°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚å¦‚æœä½ éœ€è¦åœ¨$GOPATH/binä¸‹ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ï¼Œéœ€è¦æ‰§è¡Œgo installï¼Œæˆ–è€…ä½¿ç”¨go build -o è·¯å¾„/a.exeã€‚\nå¦‚æœæŸä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æœ‰å¤šä¸ªæ–‡ä»¶ï¼Œè€Œä½ åªæƒ³ç¼–è¯‘æŸä¸ªæ–‡ä»¶ï¼Œå°±å¯åœ¨go buildä¹‹ååŠ ä¸Šæ–‡ä»¶åï¼Œä¾‹å¦‚go build a.goï¼›go buildå‘½ä»¤é»˜è®¤ä¼šç¼–è¯‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰goæ–‡ä»¶ã€‚\nä½ ä¹Ÿå¯ä»¥æŒ‡å®šç¼–è¯‘è¾“å‡ºçš„æ–‡ä»¶åã€‚ä¾‹å¦‚1.2èŠ‚ä¸­çš„mathappåº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šgo build -o astaxie.exeï¼Œé»˜è®¤æƒ…å†µæ˜¯ä½ çš„packageå(émainåŒ…)ï¼Œæˆ–è€…æ˜¯ç¬¬ä¸€ä¸ªæºæ–‡ä»¶çš„æ–‡ä»¶å(mainåŒ…)ã€‚\nï¼ˆæ³¨ï¼šå®é™…ä¸Šï¼Œpackageååœ¨Goè¯­è¨€è§„èŒƒä¸­æŒ‡ä»£ç ä¸­â€œpackageâ€åä½¿ç”¨çš„åç§°ï¼Œæ­¤åç§°å¯ä»¥ä¸æ–‡ä»¶å¤¹åä¸åŒã€‚é»˜è®¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åæ˜¯æ–‡ä»¶å¤¹åã€‚ï¼‰\ngo buildä¼šå¿½ç•¥ç›®å½•ä¸‹ä»¥â€œ_â€æˆ–â€œ.â€å¼€å¤´çš„goæ–‡ä»¶ã€‚\nå¦‚æœä½ çš„æºä»£ç é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿéœ€è¦ä¸åŒçš„å¤„ç†ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿåç¼€æ¥å‘½åæ–‡ä»¶ã€‚ä¾‹å¦‚æœ‰ä¸€ä¸ªè¯»å–æ•°ç»„çš„ç¨‹åºï¼Œå®ƒå¯¹äºä¸åŒçš„æ“ä½œç³»ç»Ÿå¯èƒ½æœ‰å¦‚ä¸‹å‡ ä¸ªæºæ–‡ä»¶ï¼š\narray_linux.go array_darwin.go array_windows.go array_freebsd.go\ngo buildçš„æ—¶å€™ä¼šé€‰æ‹©æ€§åœ°ç¼–è¯‘ä»¥ç³»ç»Ÿåç»“å°¾çš„æ–‡ä»¶ï¼ˆLinuxã€Darwinã€Windowsã€Freebsdï¼‰ã€‚ä¾‹å¦‚Linuxç³»ç»Ÿä¸‹é¢ç¼–è¯‘åªä¼šé€‰æ‹©array_linux.goæ–‡ä»¶ï¼Œå…¶å®ƒç³»ç»Ÿå‘½ååç¼€æ–‡ä»¶å…¨éƒ¨å¿½ç•¥ã€‚\nå‚æ•°çš„ä»‹ç»\n-o æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¸¦ä¸Šè·¯å¾„ï¼Œä¾‹å¦‚ go build -o a/b/c -i å®‰è£…ç›¸åº”çš„åŒ…ï¼Œç¼–è¯‘+go install -a æ›´æ–°å…¨éƒ¨å·²ç»æ˜¯æœ€æ–°çš„åŒ…çš„ï¼Œä½†æ˜¯å¯¹æ ‡å‡†åŒ…ä¸é€‚ç”¨ -n æŠŠéœ€è¦æ‰§è¡Œçš„ç¼–è¯‘å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„ -p n æŒ‡å®šå¯ä»¥å¹¶è¡Œå¯è¿è¡Œçš„ç¼–è¯‘æ•°ç›®ï¼Œé»˜è®¤æ˜¯CPUæ•°ç›® -race å¼€å¯ç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨æ£€æµ‹æ•°æ®ç«äº‰çš„æƒ…å†µï¼Œç›®å‰åªæ”¯æŒ64ä½çš„æœºå™¨ -v æ‰“å°å‡ºæ¥æˆ‘ä»¬æ­£åœ¨ç¼–è¯‘çš„åŒ…å -work æ‰“å°å‡ºæ¥ç¼–è¯‘æ—¶å€™çš„ä¸´æ—¶æ–‡ä»¶å¤¹åç§°ï¼Œå¹¶ä¸”å¦‚æœå·²ç»å­˜åœ¨çš„è¯å°±ä¸è¦åˆ é™¤ -x æ‰“å°å‡ºæ¥æ‰§è¡Œçš„å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯å’Œ-nçš„ç»“æœç±»ä¼¼ï¼Œåªæ˜¯è¿™ä¸ªä¼šæ‰§è¡Œ -ccflags 'arg list' ä¼ é€’å‚æ•°ç»™5c, 6c, 8c è°ƒç”¨ -compiler name æŒ‡å®šç›¸åº”çš„ç¼–è¯‘å™¨ï¼Œgccgoè¿˜æ˜¯gc -gccgoflags 'arg list' ä¼ é€’å‚æ•°ç»™gccgoç¼–è¯‘è¿æ¥è°ƒç”¨ -gcflags 'arg list' ä¼ é€’å‚æ•°ç»™5g, 6g, 8g è°ƒç”¨ -installsuffix suffix ä¸ºäº†å’Œé»˜è®¤çš„å®‰è£…åŒ…åŒºåˆ«å¼€æ¥ï¼Œé‡‡ç”¨è¿™ä¸ªå‰ç¼€æ¥é‡æ–°å®‰è£…é‚£äº›ä¾èµ–çš„åŒ…ï¼Œ-raceçš„æ—¶å€™é»˜è®¤å·²ç»æ˜¯-installsuffix race,å¤§å®¶å¯ä»¥é€šè¿‡-nå‘½ä»¤æ¥éªŒè¯ -ldflags 'flag list' ä¼ é€’å‚æ•°ç»™5l, 6l, 8l è°ƒç”¨ -tags 'tag list' è®¾ç½®åœ¨ç¼–è¯‘çš„æ—¶å€™å¯ä»¥é€‚é…çš„é‚£äº›tagï¼Œè¯¦ç»†çš„tagé™åˆ¶å‚è€ƒé‡Œé¢çš„ Build Constraints go clean è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥ç§»é™¤å½“å‰æºç åŒ…å’Œå…³è”æºç åŒ…é‡Œé¢ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶åŒ…æ‹¬\n_obj/ æ—§çš„objectç›®å½•ï¼Œç”±Makefilesé—ç•™\r_test/ æ—§çš„testç›®å½•ï¼Œç”±Makefilesé—ç•™\r_testmain.go æ—§çš„gotestæ–‡ä»¶ï¼Œç”±Makefilesé—ç•™\rtest.out æ—§çš„testè®°å½•ï¼Œç”±Makefilesé—ç•™\rbuild.out æ—§çš„testè®°å½•ï¼Œç”±Makefilesé—ç•™\r*.[568ao] objectæ–‡ä»¶ï¼Œç”±Makefilesé—ç•™\rDIR(.exe) ç”±go buildäº§ç”Ÿ\rDIR.test(.exe) ç”±go test -cäº§ç”Ÿ\rMAINFILE(.exe) ç”±go build MAINFILE.goäº§ç”Ÿ\r*.so ç”± SWIG äº§ç”Ÿ\ræˆ‘ä¸€èˆ¬éƒ½æ˜¯åˆ©ç”¨è¿™ä¸ªå‘½ä»¤æ¸…é™¤ç¼–è¯‘æ–‡ä»¶ï¼Œç„¶åGitHubé€’äº¤æºç ï¼Œåœ¨æœ¬æœºæµ‹è¯•çš„æ—¶å€™è¿™äº›ç¼–è¯‘æ–‡ä»¶éƒ½æ˜¯å’Œç³»ç»Ÿç›¸å…³çš„ï¼Œä½†æ˜¯å¯¹äºæºç ç®¡ç†æ¥è¯´æ²¡å¿…è¦ã€‚\n$ go clean -i -n\rcd /Users/astaxie/develop/gopath/src/mathapp\rrm -f mathapp mathapp.exe mathapp.test mathapp.test.exe app app.exe\rrm -f /Users/astaxie/develop/gopath/bin/mathapp\rå‚æ•°ä»‹ç»\n-i æ¸…é™¤å…³è”çš„å®‰è£…çš„åŒ…å’Œå¯è¿è¡Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡go installå®‰è£…çš„æ–‡ä»¶ -n æŠŠéœ€è¦æ‰§è¡Œçš„æ¸…é™¤å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„ -r å¾ªç¯çš„æ¸…é™¤åœ¨importä¸­å¼•å…¥çš„åŒ… -x æ‰“å°å‡ºæ¥æ‰§è¡Œçš„è¯¦ç»†å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯-næ‰“å°çš„æ‰§è¡Œç‰ˆæœ¬ go fmt æœ‰è¿‡C/C++ç»éªŒçš„è¯»è€…ä¼šçŸ¥é“,ä¸€äº›äººç»å¸¸ä¸ºä»£ç é‡‡å–K\u0026amp;Ré£æ ¼è¿˜æ˜¯ANSIé£æ ¼è€Œäº‰è®ºä¸ä¼‘ã€‚åœ¨goä¸­ï¼Œä»£ç åˆ™æœ‰æ ‡å‡†çš„é£æ ¼ã€‚ç”±äºä¹‹å‰å·²ç»æœ‰çš„ä¸€äº›ä¹ æƒ¯æˆ–å…¶å®ƒçš„åŸå› æˆ‘ä»¬å¸¸å°†ä»£ç å†™æˆANSIé£æ ¼æˆ–è€…å…¶å®ƒæ›´åˆé€‚è‡ªå·±çš„æ ¼å¼ï¼Œè¿™å°†ä¸ºäººä»¬åœ¨é˜…è¯»åˆ«äººçš„ä»£ç æ—¶æ·»åŠ ä¸å¿…è¦çš„è´Ÿæ‹…ï¼Œæ‰€ä»¥goå¼ºåˆ¶äº†ä»£ç æ ¼å¼ï¼ˆæ¯”å¦‚å·¦å¤§æ‹¬å·å¿…é¡»æ”¾åœ¨è¡Œå°¾ï¼‰ï¼Œä¸æŒ‰ç…§æ­¤æ ¼å¼çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼Œä¸ºäº†å‡å°‘æµªè´¹åœ¨æ’ç‰ˆä¸Šçš„æ—¶é—´ï¼Œgoå·¥å…·é›†ä¸­æä¾›äº†ä¸€ä¸ªgo fmtå‘½ä»¤ å®ƒå¯ä»¥å¸®ä½ æ ¼å¼åŒ–ä½ å†™å¥½çš„ä»£ç æ–‡ä»¶ï¼Œä½¿ä½ å†™ä»£ç çš„æ—¶å€™ä¸éœ€è¦å…³å¿ƒæ ¼å¼ï¼Œä½ åªéœ€è¦åœ¨å†™å®Œä¹‹åæ‰§è¡Œgo fmt \u0026lt;æ–‡ä»¶å\u0026gt;.goï¼Œä½ çš„ä»£ç å°±è¢«ä¿®æ”¹æˆäº†æ ‡å‡†æ ¼å¼ï¼Œä½†æ˜¯æˆ‘å¹³å¸¸å¾ˆå°‘ç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºå¼€å‘å·¥å…·é‡Œé¢ä¸€èˆ¬éƒ½å¸¦äº†ä¿å­˜æ—¶å€™è‡ªåŠ¨æ ¼å¼åŒ–åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®åœ¨åº•å±‚å°±æ˜¯è°ƒç”¨äº†go fmtã€‚æ¥ä¸‹æ¥çš„ä¸€èŠ‚æˆ‘å°†è®²è¿°ä¸¤ä¸ªå·¥å…·ï¼Œè¿™ä¸¤ä¸ªå·¥å…·éƒ½è‡ªå¸¦äº†ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨åŒ–go fmtåŠŸèƒ½ã€‚\nä½¿ç”¨go fmtå‘½ä»¤ï¼Œå…¶å®æ˜¯è°ƒç”¨äº†gofmtï¼Œè€Œä¸”éœ€è¦å‚æ•°-wï¼Œå¦åˆ™æ ¼å¼åŒ–ç»“æœä¸ä¼šå†™å…¥æ–‡ä»¶ã€‚gofmt -w -l srcï¼Œå¯ä»¥æ ¼å¼åŒ–æ•´ä¸ªé¡¹ç›®ã€‚\næ‰€ä»¥go fmtæ˜¯gofmtçš„ä¸Šå±‚ä¸€ä¸ªåŒ…è£…çš„å‘½ä»¤ï¼Œæˆ‘ä»¬æƒ³è¦æ›´å¤šçš„ä¸ªæ€§åŒ–çš„æ ¼å¼åŒ–å¯ä»¥å‚è€ƒ gofmt\ngofmtçš„å‚æ•°ä»‹ç»\n-l æ˜¾ç¤ºé‚£äº›éœ€è¦æ ¼å¼åŒ–çš„æ–‡ä»¶ -w æŠŠæ”¹å†™åçš„å†…å®¹ç›´æ¥å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä½œä¸ºç»“æœæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚ -r æ·»åŠ å½¢å¦‚â€œa[b:len(a)] -\u0026gt; a[b:]â€çš„é‡å†™è§„åˆ™ï¼Œæ–¹ä¾¿æˆ‘ä»¬åšæ‰¹é‡æ›¿æ¢ -s ç®€åŒ–æ–‡ä»¶ä¸­çš„ä»£ç  -d æ˜¾ç¤ºæ ¼å¼åŒ–å‰åçš„diffè€Œä¸æ˜¯å†™å…¥æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯false -e æ‰“å°æ‰€æœ‰çš„è¯­æ³•é”™è¯¯åˆ°æ ‡å‡†è¾“å‡ºã€‚å¦‚æœä¸ä½¿ç”¨æ­¤æ ‡è®°ï¼Œåˆ™åªä¼šæ‰“å°ä¸åŒè¡Œçš„å‰10ä¸ªé”™è¯¯ã€‚ -cpuprofile æ”¯æŒè°ƒè¯•æ¨¡å¼ï¼Œå†™å…¥ç›¸åº”çš„cpufileåˆ°æŒ‡å®šçš„æ–‡ä»¶ go get è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥åŠ¨æ€è·å–è¿œç¨‹ä»£ç åŒ…çš„ï¼Œç›®å‰æ”¯æŒçš„æœ‰BitBucketã€GitHubã€Google Codeå’ŒLaunchpadã€‚è¿™ä¸ªå‘½ä»¤åœ¨å†…éƒ¨å®é™…ä¸Šåˆ†æˆäº†ä¸¤æ­¥æ“ä½œï¼šç¬¬ä¸€æ­¥æ˜¯ä¸‹è½½æºç åŒ…ï¼Œç¬¬äºŒæ­¥æ˜¯æ‰§è¡Œgo installã€‚ä¸‹è½½æºç åŒ…çš„goå·¥å…·ä¼šè‡ªåŠ¨æ ¹æ®ä¸åŒçš„åŸŸåè°ƒç”¨ä¸åŒçš„æºç å·¥å…·ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š\nBitBucket (Mercurial Git)\rGitHub (Git)\rGoogle Code Project Hosting (Git, Mercurial, Subversion)\rLaunchpad (Bazaar)\ræ‰€ä»¥ä¸ºäº†go get èƒ½æ­£å¸¸å·¥ä½œï¼Œä½ å¿…é¡»ç¡®ä¿å®‰è£…äº†åˆé€‚çš„æºç ç®¡ç†å·¥å…·ï¼Œå¹¶åŒæ—¶æŠŠè¿™äº›å‘½ä»¤åŠ å…¥ä½ çš„PATHä¸­ã€‚å…¶å®go getæ”¯æŒè‡ªå®šä¹‰åŸŸåçš„åŠŸèƒ½ï¼Œå…·ä½“å‚è§go help remoteã€‚\nå‚æ•°ä»‹ç»ï¼š\n-d åªä¸‹è½½ä¸å®‰è£… -f åªæœ‰åœ¨ä½ åŒ…å«äº†-uå‚æ•°çš„æ—¶å€™æ‰æœ‰æ•ˆï¼Œä¸è®©-uå»éªŒè¯importä¸­çš„æ¯ä¸€ä¸ªéƒ½å·²ç»è·å–äº†ï¼Œè¿™å¯¹äºæœ¬åœ°forkçš„åŒ…ç‰¹åˆ«æœ‰ç”¨ -fix åœ¨è·å–æºç ä¹‹åå…ˆè¿è¡Œfixï¼Œç„¶åå†å»åšå…¶ä»–çš„äº‹æƒ… -t åŒæ—¶ä¹Ÿä¸‹è½½éœ€è¦ä¸ºè¿è¡Œæµ‹è¯•æ‰€éœ€è¦çš„åŒ… -u å¼ºåˆ¶ä½¿ç”¨ç½‘ç»œå»æ›´æ–°åŒ…å’Œå®ƒçš„ä¾èµ–åŒ… -v æ˜¾ç¤ºæ‰§è¡Œçš„å‘½ä»¤ go install è¿™ä¸ªå‘½ä»¤åœ¨å†…éƒ¨å®é™…ä¸Šåˆ†æˆäº†ä¸¤æ­¥æ“ä½œï¼šç¬¬ä¸€æ­¥æ˜¯ç”Ÿæˆç»“æœæ–‡ä»¶(å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€….aåŒ…)ï¼Œç¬¬äºŒæ­¥ä¼šæŠŠç¼–è¯‘å¥½çš„ç»“æœç§»åˆ°$GOPATH/pkgæˆ–è€…$GOPATH/binã€‚\nå‚æ•°æ”¯æŒgo buildçš„ç¼–è¯‘å‚æ•°ã€‚å¤§å®¶åªè¦è®°ä½ä¸€ä¸ªå‚æ•°-vå°±å¥½äº†ï¼Œè¿™ä¸ªéšæ—¶éšåœ°çš„å¯ä»¥æŸ¥çœ‹åº•å±‚çš„æ‰§è¡Œä¿¡æ¯ã€‚\ngo test æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¼šè‡ªåŠ¨è¯»å–æºç ç›®å½•ä¸‹é¢åä¸º*_test.goçš„æ–‡ä»¶ï¼Œç”Ÿæˆå¹¶è¿è¡Œæµ‹è¯•ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¾“å‡ºçš„ä¿¡æ¯ç±»ä¼¼\nok archive/tar 0.011s\rFAIL archive/zip 0.022s\rok compress/gzip 0.033s\r...\ré»˜è®¤çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ä»»ä½•çš„å‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠä½ æºç åŒ…ä¸‹é¢æ‰€æœ‰testæ–‡ä»¶æµ‹è¯•å®Œæ¯•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å¸¦ä¸Šå‚æ•°ï¼Œè¯¦æƒ…è¯·å‚è€ƒgo help testflag\nè¿™é‡Œæˆ‘ä»‹ç»å‡ ä¸ªæˆ‘ä»¬å¸¸ç”¨çš„å‚æ•°ï¼š\n-bench regexp æ‰§è¡Œç›¸åº”çš„benchmarksï¼Œä¾‹å¦‚ -bench=. -cover å¼€å¯æµ‹è¯•è¦†ç›–ç‡ -run regexp åªè¿è¡ŒregexpåŒ¹é…çš„å‡½æ•°ï¼Œä¾‹å¦‚ -run=Array é‚£ä¹ˆå°±æ‰§è¡ŒåŒ…å«æœ‰Arrayå¼€å¤´çš„å‡½æ•° -v æ˜¾ç¤ºæµ‹è¯•çš„è¯¦ç»†å‘½ä»¤ go tool go toolä¸‹é¢ä¸‹è½½èšé›†äº†å¾ˆå¤šå‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»ä¸¤ä¸ªï¼Œfixå’Œvet\ngo tool fix . ç”¨æ¥ä¿®å¤ä»¥å‰è€ç‰ˆæœ¬çš„ä»£ç åˆ°æ–°ç‰ˆæœ¬ï¼Œä¾‹å¦‚go1ä¹‹å‰è€ç‰ˆæœ¬çš„ä»£ç è½¬åŒ–åˆ°go1,ä¾‹å¦‚APIçš„å˜åŒ– go tool vet directory|files ç”¨æ¥åˆ†æå½“å‰ç›®å½•çš„ä»£ç æ˜¯å¦éƒ½æ˜¯æ­£ç¡®çš„ä»£ç ,ä¾‹å¦‚æ˜¯ä¸æ˜¯è°ƒç”¨fmt.Printfé‡Œé¢çš„å‚æ•°ä¸æ­£ç¡®ï¼Œä¾‹å¦‚å‡½æ•°é‡Œé¢æå‰returnäº†ç„¶åå‡ºç°äº†æ— ç”¨ä»£ç ä¹‹ç±»çš„ã€‚ go generate è¿™ä¸ªå‘½ä»¤æ˜¯ä»Go1.4å¼€å§‹æ‰è®¾è®¡çš„ï¼Œç”¨äºåœ¨ç¼–è¯‘å‰è‡ªåŠ¨åŒ–ç”ŸæˆæŸç±»ä»£ç ã€‚go generateå’Œgo buildæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„å‘½ä»¤ï¼Œé€šè¿‡åˆ†ææºç ä¸­ç‰¹æ®Šçš„æ³¨é‡Šï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚è¿™äº›å‘½ä»¤éƒ½æ˜¯å¾ˆæ˜ç¡®çš„ï¼Œæ²¡æœ‰ä»»ä½•çš„ä¾èµ–åœ¨é‡Œé¢ã€‚è€Œä¸”å¤§å®¶åœ¨ç”¨è¿™ä¸ªä¹‹å‰å¿ƒé‡Œé¢ä¸€å®šè¦æœ‰ä¸€ä¸ªç†å¿µï¼Œè¿™ä¸ªgo generateæ˜¯ç»™ä½ ç”¨çš„ï¼Œä¸æ˜¯ç»™ä½¿ç”¨ä½ è¿™ä¸ªåŒ…çš„äººç”¨çš„ï¼Œæ˜¯æ–¹ä¾¿ä½ æ¥ç”Ÿæˆä¸€äº›ä»£ç çš„ã€‚\nè¿™é‡Œæˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¾‹å¦‚æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨yaccæ¥ç”Ÿæˆä»£ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸¸ç”¨è¿™æ ·çš„å‘½ä»¤ï¼š\ngo tool yacc -o gopher.go -p parser gopher.y\r-o æŒ‡å®šäº†è¾“å‡ºçš„æ–‡ä»¶åï¼Œ -pæŒ‡å®šäº†packageçš„åç§°ï¼Œè¿™æ˜¯ä¸€ä¸ªå•ç‹¬çš„å‘½ä»¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©go generateæ¥è§¦å‘è¿™ä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å½“å‰ç›®å½•çš„ä»»æ„ä¸€ä¸ªxxx.goæ–‡ä»¶é‡Œé¢çš„ä»»æ„ä½ç½®å¢åŠ ä¸€è¡Œå¦‚ä¸‹çš„æ³¨é‡Šï¼š\n//go:generate go tool yacc -o gopher.go -p parser gopher.y\rè¿™é‡Œæˆ‘ä»¬æ³¨æ„äº†ï¼Œ//go:generateæ˜¯æ²¡æœ‰ä»»ä½•ç©ºæ ¼çš„ï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ä¸ªå›ºå®šçš„æ ¼å¼ï¼Œåœ¨æ‰«ææºç æ–‡ä»¶çš„æ—¶å€™å°±æ˜¯æ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­çš„ã€‚\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤æ¥ç”Ÿæˆï¼Œç¼–è¯‘ï¼Œæµ‹è¯•ã€‚å¦‚æœgopher.yæ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±é‡æ–°æ‰§è¡Œgo generateé‡æ–°ç”Ÿæˆæ–‡ä»¶å°±å¥½ã€‚\n$ go generate\r$ go build\r$ go test\rgodoc åœ¨Go1.2ç‰ˆæœ¬ä¹‹å‰è¿˜æ”¯æŒgo docå‘½ä»¤ï¼Œä½†æ˜¯ä¹‹åå…¨éƒ¨ç§»åˆ°äº†godocè¿™ä¸ªå‘½ä»¤ä¸‹ï¼Œéœ€è¦è¿™æ ·å®‰è£…go get golang.org/x/tools/cmd/godoc\nå¾ˆå¤šäººè¯´goä¸éœ€è¦ä»»ä½•çš„ç¬¬ä¸‰æ–¹æ–‡æ¡£ï¼Œä¾‹å¦‚chmæ‰‹å†Œä¹‹ç±»çš„ï¼ˆå…¶å®æˆ‘å·²ç»åšäº†ä¸€ä¸ªäº†ï¼Œchmæ‰‹å†Œï¼‰ï¼Œå› ä¸ºå®ƒå†…éƒ¨å°±æœ‰ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ–‡æ¡£å·¥å…·ã€‚\nå¦‚ä½•æŸ¥çœ‹ç›¸åº”packageçš„æ–‡æ¡£å‘¢ï¼Ÿ ä¾‹å¦‚builtinåŒ…ï¼Œé‚£ä¹ˆæ‰§è¡Œgodoc builtin å¦‚æœæ˜¯httpåŒ…ï¼Œé‚£ä¹ˆæ‰§è¡Œgodoc net/http æŸ¥çœ‹æŸä¸€ä¸ªåŒ…é‡Œé¢çš„å‡½æ•°ï¼Œé‚£ä¹ˆæ‰§è¡Œgodoc fmt Printf ä¹Ÿå¯ä»¥æŸ¥çœ‹ç›¸åº”çš„ä»£ç ï¼Œæ‰§è¡Œgodoc -src fmt Printf\né€šè¿‡å‘½ä»¤åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ godoc -http=:ç«¯å£å· æ¯”å¦‚godoc -http=:8080ã€‚ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€127.0.0.1:8080ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªgolang.orgçš„æœ¬åœ°copyç‰ˆæœ¬ï¼Œé€šè¿‡å®ƒä½ å¯ä»¥æŸ¥è¯¢pkgæ–‡æ¡£ç­‰å…¶å®ƒå†…å®¹ã€‚å¦‚æœä½ è®¾ç½®äº†GOPATHï¼Œåœ¨pkgåˆ†ç±»ä¸‹ï¼Œä¸ä½†ä¼šåˆ—å‡ºæ ‡å‡†åŒ…çš„æ–‡æ¡£ï¼Œè¿˜ä¼šåˆ—å‡ºä½ æœ¬åœ°GOPATHä¸­æ‰€æœ‰é¡¹ç›®çš„ç›¸å…³æ–‡æ¡£ï¼Œè¿™å¯¹äºç»å¸¸è¢«å¢™çš„ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\nå…¶å®ƒå‘½ä»¤ goè¿˜æä¾›äº†å…¶å®ƒå¾ˆå¤šçš„å·¥å…·ï¼Œä¾‹å¦‚ä¸‹é¢çš„è¿™äº›å·¥å…·\ngo version æŸ¥çœ‹goå½“å‰çš„ç‰ˆæœ¬\rgo env æŸ¥çœ‹å½“å‰goçš„ç¯å¢ƒå˜é‡\rgo list åˆ—å‡ºå½“å‰å…¨éƒ¨å®‰è£…çš„package\rgo run ç¼–è¯‘å¹¶è¿è¡ŒGoç¨‹åº\rä»¥ä¸Šè¿™äº›å·¥å…·è¿˜æœ‰å¾ˆå¤šå‚æ•°æ²¡æœ‰ä¸€ä¸€ä»‹ç»ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨go help å‘½ä»¤è·å–æ›´è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯ã€‚\n","permalink":"https://liiqii.github.io/posts/tech/go/command/","summary":"æ•°æ®æŸ¥è¯¢ go build è¿™ä¸ªå‘½ä»¤ä¸»è¦ç”¨äºç¼–è¯‘ä»£ç ã€‚åœ¨åŒ…çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè‹¥æœ‰å¿…è¦ï¼Œä¼šåŒæ—¶ç¼–è¯‘ä¸ä¹‹ç›¸å…³è”çš„åŒ…ã€‚ å¦‚æœæ˜¯æ™®é€šåŒ…ï¼Œå°±åƒæˆ‘ä»¬åœ¨1.2èŠ‚ä¸­ç¼–å†™çš„mymathåŒ…é‚£æ ·ï¼Œå½“ä½ æ‰§è¡Œgo buildä¹‹åï¼Œå®ƒä¸ä¼šäº§ç”Ÿä»»ä½•æ–‡ä»¶ã€‚å¦‚æœä½ éœ€è¦åœ¨$GOPATH/pkgä¸‹ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ï¼Œé‚£å°±å¾—æ‰§è¡Œgo install","title":"go ç›¸å…³æ“ä½œå‘½ä»¤"},{"content":"æ•°æ®æŸ¥è¯¢ find()æ–¹æ³• æ–¹æ³•è¯´æ˜\nfind()æ–¹æ³•æ²¡æœ‰å‚æ•°æ—¶ä¼šåŒ¹é…é›†åˆä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œfind({})å’Œfind()åŠŸèƒ½ä¸€æ · find({\u0026quot;_id\u0026quot;:1})è¡¨ç¤ºæŸ¥è¯¢_idå­—æ®µä¸º 1 çš„æ–‡æ¡£ï¼›find({\u0026quot;_id\u0026quot;:1,\u0026quot;name\u0026quot;:\u0026quot;salta\u0026quot;})å¤šä¸ªç­›é€‰æ¡ä»¶è¡¨ç¤ºä¸ºandçš„å…³ç³»ï¼Œè¡¨ç¤ºæŸ¥è¯¢_id=1 and name='salta'çš„æ–‡æ¡£ï¼›å¢åŠ æŸ¥è¯¢æ¡ä»¶ä¹Ÿä¸€æ · find({},{\u0026quot;price\u0026quot;:0,\u0026quot;_id\u0026quot;:0})è¡¨ç¤ºä»æŸ¥è¯¢ç»“æœä¸­å‰”é™¤priceå’Œ_idå­—æ®µï¼›find({},{\u0026quot;name\u0026quot;:1,\u0026quot;price\u0026quot;:1})è¡¨ç¤ºä»æŸ¥è¯¢ç»“æœä¸­åªä¿ç•™nameå’Œpriceå­—æ®µã€‚ find()æ–¹æ³•ä¸­çš„ç­›é€‰æ¡ä»¶å¿…é¡»æ˜¯å¸¸é‡ **æ³¨æ„ï¼š**ç¬¬äºŒä¸ªå‚æ•°ä¸­å¦‚æœæ˜¯ä¿ç•™å­—æ®µï¼Œåˆ™å¿…é¡»éƒ½æ˜¯ä¿ç•™å­—æ®µï¼›å¦‚æœæ˜¯å‰”é™¤å­—æ®µï¼Œåˆ™å¿…é¡»éƒ½æ˜¯å‰”é™¤å­—æ®µã€‚å¦åˆ™ mongodb ä¼šæŠ¥é”™ã€‚ä½†_idå­—æ®µä¸å—æ­¤è§„åˆ™é™åˆ¶ï¼Œå¯ä»¥éšæ„å‰”é™¤ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š\n//ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™ db.game.find( {}, { name: 1, price: 0, } ); //ä»¥ä¸‹ä»£ç èƒ½æ­£å¸¸è¿è¡Œ db.game.find( {}, { name: 1, _id: 0, } ); è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find({},{ ... \u0026#34;name\u0026#34;:1, ... \u0026#34;price\u0026#34;:0 ... }) Error: error: { \u0026#34;ok\u0026#34; : 0, \u0026#34;errmsg\u0026#34; : \u0026#34;Cannot do exclusion on field price in inclusion projection\u0026#34;, \u0026#34;code\u0026#34; : 31254, \u0026#34;codeName\u0026#34; : \u0026#34;Location31254\u0026#34; } \u0026gt; db.game.find({},{ ... \u0026#34;name\u0026#34;:1, ... \u0026#34;_id\u0026#34;:0 ... }) { \u0026#34;name\u0026#34; : \u0026#34;salta legend\u0026#34; } { \u0026#34;name\u0026#34; : \u0026#34;monster hunter: rise\u0026#34; } { \u0026#34;name\u0026#34; : \u0026#34;monster hunter: world\u0026#34; } { \u0026#34;name\u0026#34; : \u0026#34;bayonetta\u0026#34; } { \u0026#34;name\u0026#34; : \u0026#34;nier replicant\u0026#34; } { \u0026#34;name\u0026#34; : \u0026#34;god of war\u0026#34; } { \u0026#34;name\u0026#34; : \u0026#34;Nioh 2\u0026#34; } æ¡ä»¶æŸ¥è¯¢ $lt,$lte,$gt,$gte,$ne $ltå°äº $lteå°äºç­‰äº $gtå¤§äº $gteå¤§äºç­‰äº $neä¸ç­‰äº,$neå¯ç”¨äºä»»æ„æ•°æ®ç±»å‹ ä»¥ä¸‹ä»£ç ç”¨æ¥æŸ¥è¯¢ä»·æ ¼å¤§äº 20,ä¸”ä»·æ ¼å°äºç­‰äº 280 çš„ document\ndb.game.find({ price: { $gt: 20, $lte: 280, }, }); è¿è¡Œæ•ˆæœå¦‚ä¸‹:\n\u0026gt; db.game.find({ ... \u0026#34;price\u0026#34;:{ ... \u0026#34;$gt\u0026#34;:20, ... \u0026#34;$lte\u0026#34;:280 ... } ... }) { \u0026#34;_id\u0026#34; : 1, \u0026#34;name\u0026#34; : \u0026#34;monster hunter: world\u0026#34;, \u0026#34;price\u0026#34; : 128, \u0026#34;platform\u0026#34; : [ \u0026#34;steam\u0026#34; ], \u0026#34;comments\u0026#34; : [ { \u0026#34;author\u0026#34; : \u0026#34;xilia\u0026#34;, \u0026#34;content\u0026#34; : \u0026#34;hello salta\u0026#34;, \u0026#34;hidden\u0026#34; : true }, { \u0026#34;author\u0026#34; : \u0026#34;salta\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; } ] } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94b\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;nier replicant\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;square enix\u0026#34;, \u0026#34;price\u0026#34; : 180 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd39540a71331919b6295e\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;god of war\u0026#34;, \u0026#34;price\u0026#34; : 30 } $or $orè¿ç®—ç¬¦ç”¨äºè¡¨ç¤ºä¸¤ä¸ªæ˜¯ç­›é€‰æ¡ä»¶æ˜¯æˆ–çš„å…³ç³»,ä»¥ä¸‹ä»£ç ç”¨æ¥ç­›é€‰ä»·æ ¼å¤§äº280æˆ–è€…ä»·æ ¼å°äºç­‰äº20çš„document\ndb.game.find({\u0026#34;$or\u0026#34;:[ {\u0026#34;price\u0026#34;:{\u0026#34;$gt\u0026#34;:280}}, {\u0026#34;price\u0026#34;:{\u0026#34;$lte\u0026#34;:20}} ]}) ä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹:\n\u0026gt; db.game.find({\u0026#34;$or\u0026#34;:[ ... {\u0026#34;price\u0026#34;:{\u0026#34;$gt\u0026#34;:280}}, ... {\u0026#34;price\u0026#34;:{\u0026#34;$lte\u0026#34;:20}} ... ]}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62b9515ba8e0e5b80c720d94\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;salta legend\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-27T06:42:35.640Z\u0026#34;), \u0026#34;price\u0026#34; : 327 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba565711721fa1455eb949\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;monster hunter: rise\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-28T01:16:07.114Z\u0026#34;), \u0026#34;price\u0026#34; : 298 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94a\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;bayonetta\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;nintendo\u0026#34;, \u0026#34;price\u0026#34; : 318 } $inå’Œ$nin $inç”¨æ¥ç­›é€‰åœ¨æŸäº›åˆ—å‡ºçš„èŒƒå›´å†…çš„å±æ€§(å’Œsqlè¯­å¥ä¸­çš„inå…³é”®å­—ç›¸åŒ)\n$ninæ˜¯not inçš„æ„æ€\nä»¥ä¸‹ä»£ç ç”¨æ¥æŸ¥è¯¢ä»·æ ¼åœ¨[327,30]ä¸¤ä¸ªæ•°å­—ä¸­çš„ç»“æœ:\ndb.game.find({\u0026#34;price\u0026#34;:{ \u0026#34;$in\u0026#34;:[327,30] }}) ä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹:\n\u0026gt; db.game.find({\u0026#34;price\u0026#34;:{ ... \u0026#34;$in\u0026#34;:[327,30] ... }}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62b9515ba8e0e5b80c720d94\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;salta legend\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-27T06:42:35.640Z\u0026#34;), \u0026#34;price\u0026#34; : 327 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd39540a71331919b6295e\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;god of war\u0026#34;, \u0026#34;price\u0026#34; : 30 } $mod $modä¸ºå–æ¨¡è¿ç®—ç¬¦,ä»¥ä¸‹ä»£ç ç”¨æ¥ç­›é€‰å‡º å¯¹priceæ¨¡3ä½™0çš„documentã€‚\ndb.game.find({\u0026#34;price\u0026#34;:{ \u0026#34;$mod\u0026#34;:[3,0] }}) ä»£ç è¿è¡Œæ•ˆæœä¸ºï¼š\n\u0026gt; db.game.find({\u0026#34;price\u0026#34;:{ ... \u0026#34;$mod\u0026#34;:[3,0] ... }}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62b9515ba8e0e5b80c720d94\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;salta legend\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-27T06:42:35.640Z\u0026#34;), \u0026#34;price\u0026#34; : 327 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94a\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;bayonetta\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;nintendo\u0026#34;, \u0026#34;price\u0026#34; : 318 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94b\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;nier replicant\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;square enix\u0026#34;, \u0026#34;price\u0026#34; : 180 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd39540a71331919b6295e\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;god of war\u0026#34;, \u0026#34;price\u0026#34; : 30 } $not $notè¡¨ç¤ºå–åï¼Œå¯ç”¨äºæè¿°å…¶ä»–è¿ç®—ç¬¦ï¼Œä»¥ä¸‹ä»£ç ç”¨æ¥ç­›é€‰å‡º ä¸æ»¡è¶³å¯¹priceæ¨¡3ä½™0çš„document\ndb.game.find({\u0026#34;price\u0026#34;:{ \u0026#34;$not\u0026#34;:{ \u0026#34;$mod\u0026#34;:[3,0] } }}) ä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find({\u0026#34;price\u0026#34;:{ ... \u0026#34;$not\u0026#34;:{ ... \u0026#34;$mod\u0026#34;:[3,0] ... } ... }}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba565711721fa1455eb949\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;monster hunter: rise\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-28T01:16:07.114Z\u0026#34;), \u0026#34;price\u0026#34; : 298 } { \u0026#34;_id\u0026#34; : 1, \u0026#34;name\u0026#34; : \u0026#34;monster hunter: world\u0026#34;, \u0026#34;price\u0026#34; : 128, \u0026#34;platform\u0026#34; : [ \u0026#34;steam\u0026#34; ], \u0026#34;comments\u0026#34; : [ { \u0026#34;author\u0026#34; : \u0026#34;xilia\u0026#34;, \u0026#34;content\u0026#34; : \u0026#34;hello salta\u0026#34;, \u0026#34;hidden\u0026#34; : true }, { \u0026#34;author\u0026#34; : \u0026#34;salta\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; } ] } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd3d9f0a71331919b6297a\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;Nioh 2\u0026#34;, \u0026#34;published\u0026#34; : ISODate(\u0026#34;2022-06-30T06:08:30.014Z\u0026#34;) } ç±»å‹æŸ¥è¯¢ å…³äºnullç±»å‹çš„è¯´æ˜ å½“æŸ¥è¯¢æ¡ä»¶è®¾ç½®ä¸º{\u0026quot;platform\u0026quot;:null}æ—¶ï¼Œæ—¢å¯ä»¥æŸ¥åˆ°platform=nullçš„æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æŸ¥åˆ°ä¸å­˜åœ¨platformå­—æ®µçš„æ–‡æ¡£ã€‚å¦‚æœåªå¸Œæœ›å¾—åˆ°platform=nullçš„æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡$exitsæ¡ä»¶ç¡®å®šè¯¥å­—æ®µå­˜åœ¨ã€‚\nä»¥ä¸‹ä»£ç ç”¨æ¥ç­›é€‰å‡ºplatformå­—æ®µå­˜åœ¨ï¼Œå¹¶ä¸”ä¸ºç©ºçš„æ–‡æ¡£ï¼š\ndb.game.find({\u0026#34;platform\u0026#34;:{ \u0026#34;$eq\u0026#34;:null, \u0026#34;$exists\u0026#34;:true }}) ä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.insertMany([{name:\u0026#34;it takes two\u0026#34;,platform:null},{name:\u0026#34;naraka\u0026#34;,platform:\u0026#34;\u0026#34;},{name:\u0026#34;gta5\u0026#34;}]) { \u0026#34;acknowledged\u0026#34; : true, \u0026#34;insertedIds\u0026#34; : [ ObjectId(\u0026#34;62be8e82718b6cda80d080aa\u0026#34;), ObjectId(\u0026#34;62be8e82718b6cda80d080ab\u0026#34;), ObjectId(\u0026#34;62be8e82718b6cda80d080ac\u0026#34;) ] } \u0026gt; db.game.find({\u0026#34;platform\u0026#34;:{ ... \u0026#34;$eq\u0026#34;:null, ... \u0026#34;$exists\u0026#34;:true ... }}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080aa\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;it takes two\u0026#34;, \u0026#34;platform\u0026#34; : null } å¦‚æœåªè¿›è¡Œnullç­›é€‰ï¼Œæ•ˆæœå¦‚ä¸‹:\n\u0026gt; db.game.find({\u0026#34;platform\u0026#34;:null}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62b9515ba8e0e5b80c720d94\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;salta legend\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-27T06:42:35.640Z\u0026#34;), \u0026#34;price\u0026#34; : 327 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba565711721fa1455eb949\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;monster hunter: rise\u0026#34;, \u0026#34;orderDate\u0026#34; : ISODate(\u0026#34;2022-06-28T01:16:07.114Z\u0026#34;), \u0026#34;price\u0026#34; : 298 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94a\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;bayonetta\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;nintendo\u0026#34;, \u0026#34;price\u0026#34; : 318 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94b\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;nier replicant\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;square enix\u0026#34;, \u0026#34;price\u0026#34; : 180 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd39540a71331919b6295e\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;god of war\u0026#34;, \u0026#34;price\u0026#34; : 30 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd3d9f0a71331919b6297a\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;Nioh 2\u0026#34;, \u0026#34;published\u0026#34; : ISODate(\u0026#34;2022-06-30T06:08:30.014Z\u0026#34;) } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080aa\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;it takes two\u0026#34;, \u0026#34;platform\u0026#34; : null } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080ac\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;gta5\u0026#34; } æ­£åˆ™è¡¨è¾¾å¼ $regexè¿ç®—ç¬¦ç”¨æ¥åœ¨æŸ¥è¯¢ä¸­å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™è¡¨è¾¾æ—¶åŒ¹é…ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿéµå¾ªJavaScriptçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚å¦‚ï¼Œä»¥ä¸‹ä»£ç ç”¨æ¥æŸ¥è¯¢nameå­—æ®µä»¥næˆ–Nå¼€å¤´çš„æ–‡æ¡£ï¼š\ndb.game.find({\u0026#34;name\u0026#34;:{ \u0026#34;$regex\u0026#34;:/^n/i }}) æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find({\u0026#34;name\u0026#34;:{ ... \u0026#34;$regex\u0026#34;:/^n/i ... }}) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62ba596511721fa1455eb94b\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;nier replicant\u0026#34;, \u0026#34;company\u0026#34; : \u0026#34;square enix\u0026#34;, \u0026#34;price\u0026#34; : 180 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62bd3d9f0a71331919b6297a\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;Nioh 2\u0026#34;, \u0026#34;published\u0026#34; : ISODate(\u0026#34;2022-06-30T06:08:30.014Z\u0026#34;) } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080ab\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;naraka\u0026#34;, \u0026#34;platform\u0026#34; : \u0026#34;\u0026#34; } æ•°ç»„æŸ¥è¯¢ æµ‹è¯•ç”¨æ³•ä¹‹å‰å…ˆæ–°å¢æ•°æ®ï¼š\ndb.game.updateOne( {name:\u0026#34;naraka\u0026#34;}, {$set:[ \u0026#34;it is so good\u0026#34;, \u0026#34;it is so pretty\u0026#34;, \u0026#34;i am a old gamer\u0026#34;, \u0026#34;it`s my like\u0026#34;, \u0026#34;i like sanniang\u0026#34; ]} ) æ•°ç»„å†…å®¹åŒ¹é…æ–¹å¼ï¼š\nå®Œå…¨åŒ¹é…æ•´ä¸ªæ•°ç»„\ndb.game.find({\u0026quot;comments\u0026quot;:[\u0026quot;abc\u0026quot;,\u0026quot;def\u0026quot;]})ç”¨æ¥ç­›é€‰å‡ºæ•°ç»„commentså­—æ®µå€¼ä¸º['abc','def']çš„æ–‡æ¡£ï¼Œè¿™ç§ç”¨æ³•å’Œç²¾ç¡®åŒ¹é…å®Œå…¨ä¸€æ ·ã€‚\nåŒ¹é…å•ä¸ªæ•°ç»„å…ƒç´ \ndb.game.find({\u0026quot;comments\u0026quot;:\u0026quot;it is so good\u0026quot;})ç”¨æ¥ç­›é€‰å‡ºæ•°ç»„commentså­—æ®µå€¼ä¸­åŒ…å«it is so goodå…ƒç´ çš„æ–‡æ¡£\nåŒ¹é…å¤šä¸ªæ•°ç»„å…ƒç´ ï¼Œ$all\ndb.game.find({\u0026quot;comments\u0026quot;:{\u0026quot;all\u0026quot;:[\u0026quot;it is so good\u0026quot;,\u0026quot;i am a old gamer\u0026quot;]}})ç”¨æ¥ç­›é€‰å‡ºæ•°ç»„å…ƒç´ ä¸­åŒ…å«it is so goodå’Œi am a old gamerä¸¤ä¸ªå…ƒç´ çš„æ–‡æ¡£ã€‚å¦‚æœ$allçš„æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆä½¿ç”¨$allå’Œä¸é€‚ç”¨$allç»“æœä¸€æ ·ï¼Œå³ï¼š{\u0026quot;author\u0026quot;:{\u0026quot;$all\u0026quot;:[\u0026quot;apple\u0026quot;]}}å’Œ{\u0026quot;author\u0026quot;:\u0026quot;apple\u0026quot;}çš„ç­›é€‰ç»“æœå®Œå…¨ä¸€æ ·\nåŒ¹é…æ•°ç»„é•¿åº¦\n$sizeè¿ç®—ç¬¦ç”¨äºåŒ¹é…æ•°ç»„é•¿åº¦ï¼Œä½†$sizeåªèƒ½æ˜¯å¸¸æ•°ï¼Œä¸”$sizeä¸èƒ½å’Œ$ltç­‰æ¯”è¾ƒè¿ç®—ç¬¦åŒæ—¶ä½¿ç”¨ã€‚å¦‚æœéœ€è¦æ¯”è¾ƒæ•°ç»„çš„é•¿åº¦ï¼Œå¯ä»¥å•ç‹¬å¢åŠ ä¸€ä¸ªsizeå­—æ®µï¼Œæ¯æ¬¡ä¿®æ”¹æ•°ç»„åŒæ—¶ä¿®æ”¹è¿™ä¸ªsizeå­—æ®µï¼Œè¿™åœ¨mongoDBä¸­å¾ˆå®¹æ˜“å®ç°ã€‚\ndb.game.find({\u0026quot;comments\u0026quot;:{\u0026quot;$size\u0026quot;:3}})ç”¨äºç­›é€‰commentsæ•°ç»„é•¿åº¦ä¸º3çš„æ–‡æ¡£ã€‚\nåŒ¹é…æ•°ç»„å…ƒç´ å¯¹è±¡çš„å±æ€§\ndb.game.find({\u0026quot;comments.author\u0026quot;:\u0026quot;salta\u0026quot;})ç”¨äºç­›é€‰commentsæ•°ç»„ä¸­å…ƒç´ çš„authorå±æ€§ä¸ºsaltaçš„æ–‡æ¡£\næ§åˆ¶è¿”å›å€¼æ•°ç»„çš„é•¿åº¦\nè¿‡æ»¤è¿”å›å€¼ä¸­æ˜¾ç¤ºçš„æ•°ç»„é•¿åº¦å¯ä»¥ä½¿ç”¨$sliceä¿®é¥°ç¬¦ï¼Œæ•´æ•°nè¡¨ç¤ºè¿”å›å‰næ¡æ•°æ®ï¼Œè´Ÿæ•°nè¡¨ç¤ºè¿”å›ånæ¡æ•°æ®ã€‚ä»¥ä¸‹ä»£ç ç”¨äºè¿”å›commentså­—æ®µçš„å‰3ä¸ªå…ƒç´ ï¼š\ndb.game.find( {\u0026#34;name\u0026#34;:\u0026#34;naraka\u0026#34;}, {\u0026#34;comments\u0026#34;:{\u0026#34;$slice\u0026#34;:3}} ) è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find( ... {\u0026#34;name\u0026#34;:\u0026#34;naraka\u0026#34;}, ... {\u0026#34;comments\u0026#34;:{\u0026#34;$slice\u0026#34;:3}} ... ) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080ab\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;naraka\u0026#34;, \u0026#34;platform\u0026#34; : \u0026#34;\u0026#34;, \u0026#34;comments\u0026#34; : [ \u0026#34;it is so good\u0026#34;, \u0026#34;it is so pretty\u0026#34;, \u0026#34;i am a old gamer\u0026#34; ] } æ­¤æ–¹æ³•ä¹Ÿå¯ä»¥è¿”å›æ•°ç»„ä¸­çš„ä¸€æ®µæ•°æ®ï¼Œä»¥ä¸‹ä»£ç ä¼šè¿”å›commentså­—æ®µçš„ç¬¬2~ç¬¬4ä¸ªå…ƒç´ ï¼ˆå¿½ç•¥å‰1ä¸ªå…ƒç´ ï¼Œä»ç¬¬2ä¸ªå¼€å§‹è¿”å›3ä¸ªå…ƒç´ ï¼‰\ndb.game.find( {\u0026#34;name\u0026#34;:\u0026#34;naraka\u0026#34;}, {\u0026#34;comments\u0026#34;:{\u0026#34;$slice\u0026#34;:[1,3]}} ) æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find( ... {\u0026#34;name\u0026#34;:\u0026#34;naraka\u0026#34;}, ... {\u0026#34;comments\u0026#34;:{\u0026#34;$slice\u0026#34;:[1,3]}} ... ) { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080ab\u0026#34;), \u0026#34;name\u0026#34; : \u0026#34;naraka\u0026#34;, \u0026#34;platform\u0026#34; : \u0026#34;\u0026#34;, \u0026#34;comments\u0026#34; : [ \u0026#34;it is so pretty\u0026#34;, \u0026#34;i am a old gamer\u0026#34;, \u0026#34;it`s my like\u0026#34; ] } åªè¿”å›æ•°ç»„ä¸­åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ \nå¯ä»¥é€šè¿‡$$è¿ç®—ç¬¦æ¥è¿”å›åŒ¹é…åˆ°çš„å…ƒç´ ï¼Œè¿™ç§æ–¹æ³•åªèƒ½è¿”å›åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼çš„æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ã€‚ä»¥ä¸‹ä»£ç ç”¨äºç­›é€‰commentsæ•°ç»„å­—æ®µä¸­çš„å…ƒç´ å¯¹è±¡çš„authorå±æ€§ï¼Œè¿”å›å€¼ä¸­åªæœ‰_idå’Œcommentså­—æ®µï¼Œä¸”commentså­—æ®µä¸­åªæœ‰åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\ndb.game.find( {\u0026#34;comments.author\u0026#34;:\u0026#34;salta\u0026#34;}, {\u0026#34;comments.$\u0026#34;:1} ) ä»£ç è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find( ... {\u0026#34;comments.author\u0026#34;:\u0026#34;salta\u0026#34;}, ... {\u0026#34;comments.$\u0026#34;:1} ... ) { \u0026#34;_id\u0026#34; : 1, \u0026#34;comments\u0026#34; : [ { \u0026#34;author\u0026#34; : \u0026#34;salta\u0026#34; } ] } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62be8e82718b6cda80d080ab\u0026#34;), \u0026#34;comments\u0026#34; : [ { \u0026#34;author\u0026#34; : \u0026#34;salta\u0026#34;, \u0026#34;content\u0026#34; : \u0026#34;i am salta\u0026#34; } ] } æ•°ç»„ä¸èŒƒå›´æŸ¥è¯¢ æœ‰ä»¥ä¸‹æ•°æ®ï¼š\ndb.number.insertMany([ {\u0026#34;num\u0026#34;:6}, {\u0026#34;num\u0026#34;:66}, {\u0026#34;num\u0026#34;:666}, {\u0026#34;num\u0026#34;:[6,66]}, {\u0026#34;num\u0026#34;:[6,666]}, {\u0026#34;num\u0026#34;:[6,66,666]} ]) æœ‰ä»¥ä¸‹æŸ¥è¯¢ä»£ç ï¼š\ndb.number.find({\u0026#34;num\u0026#34;:{ \u0026#34;$gt\u0026#34;:10, \u0026#34;$lt\u0026#34;:100 }}) æ­¤ä»£ç ç›®çš„æ˜¯æŸ¥æ‰¾ 10 \u0026lt; n u m \u0026lt; 100 10\u0026lt;num\u0026lt;100 10\u0026lt;num\u0026lt;100çš„æ•°æ®ï¼ŒæœŸæœ›èƒ½è¿”å›çš„æ•°æ®ä¸ºï¼š\n{\u0026#34;num\u0026#34;:66}, ä½†ï¼Œå®é™…è¿”å›çš„æ•°æ®ä¸ºï¼š\n{\u0026#34;num\u0026#34; : 66 } {\u0026#34;num\u0026#34; : [ 6, 66 ] } {\u0026#34;num\u0026#34; : [ 6, 666 ] } {\u0026#34;num\u0026#34; : [ 6, 66, 666 ] } å› ä¸ºï¼Œåœ¨æ•°ç»„çš„æ¯”è¾ƒä¸­ï¼Œæ»¡è¶³6\u0026lt;100 å’Œ666\u0026gt;66\u0026gt;10ï¼Œæ‰€ä»¥å®é™…è¿”å›å€¼å’ŒæœŸæœ›è¿”å›å€¼äº§ç”Ÿäº†å·®åˆ«ï¼Œè¿™å°±ä½¿å¾—é’ˆå¯¹æ•°ç»„çš„èŒƒå›´æŸ¥è¯¢å¤±æ•ˆã€‚\nè¿™ç§ç°è±¡å¯ä»¥é€šè¿‡$elemMatchè¡¨è¾¾å¼è§£å†³ï¼Œä½†æ˜¯$elemMatchè¡¨è¾¾å¼åªèƒ½åŒ¹é…æ•°ç»„å…ƒç´ ï¼Œå¯¹äºéæ•°ç»„å…ƒç´ å›è¢«è·³è¿‡ã€‚æ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.number.find().pretty() { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62beb40a718b6cda80d080ad\u0026#34;), \u0026#34;num\u0026#34; : 6 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62beb40a718b6cda80d080ae\u0026#34;), \u0026#34;num\u0026#34; : 66 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62beb40a718b6cda80d080af\u0026#34;), \u0026#34;num\u0026#34; : 666 } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62beb40a718b6cda80d080b0\u0026#34;), \u0026#34;num\u0026#34; : [ 6, 66 ] } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62beb40a718b6cda80d080b1\u0026#34;), \u0026#34;num\u0026#34; : [ 6, 666 ] } { \u0026#34;_id\u0026#34; : ObjectId(\u0026#34;62beb40a718b6cda80d080b2\u0026#34;), \u0026#34;num\u0026#34; : [ 6, 66, 666 ] } \u0026gt; db.number.find({\u0026#34;num\u0026#34;:{\u0026#34;$elemMatch\u0026#34;:{\u0026#34;$gt\u0026#34;:10,\u0026#34;$lt\u0026#34;:100}}}) \u0026gt; //æŸ¥è¯¢ç»“æœä¸ºç©ºã€‚å¯è§ï¼Œ{\u0026#34;num\u0026#34;:66}æœªå‚ä¸ç­›é€‰ å¯¹äºä»¥ä¸Šç°è±¡ï¼Œå¯ä»¥é€šè¿‡å¯¹numå­—æ®µæ·»åŠ ç´¢å¼•ï¼Œä¹‹åä½¿ç”¨minå’Œmaxæ–¹æ³•å°†ç­›é€‰æ¡ä»¶çš„ç´¢å¼•èŒƒå›´é™åˆ¶åœ¨æœ€å¤§å’Œæœ€å°å€¼ä¹‹é—´çš„å½¢å¼äºˆä»¥è§£å†³ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n//å·²å¯¹numå­—æ®µåˆ›å»ºç´¢å¼• db.number.find({\u0026#34;num\u0026#34;:{ \u0026#34;$gt\u0026#34;:10, \u0026#34;$lt\u0026#34;:100 }}).min({\u0026#34;num\u0026#34;:10}).max({\u0026#34;num\u0026#34;:100}) å†…åµŒæ–‡æ¡£æŸ¥è¯¢ å¦‚æœæƒ³è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥è¯¢ä¸€ä¸ªå­æ–‡æ¡£ï¼Œé‚£ä¹ˆè¿™ä¸ªè¢«æŸ¥è¯¢å¿…é¡»ç²¾ç¡®çš„åŒ¹é…æ•´ä¸ªæ–‡æ¡£ï¼ˆåŒ…æ‹¬å„ä¸ªå±æ€§çš„é¡ºåºï¼‰ã€‚å³ï¼Œå¦‚æœæ–‡æ¡£çš„å†…å®¹ä¸º{\u0026quot;author\u0026quot;:\u0026quot;xilia\u0026quot;,\u0026quot;content\u0026quot;:\u0026quot;hello salta\u0026quot;}ï¼Œåˆ™èƒ½åŒ¹é…æˆåŠŸï¼›ä½†æ˜¯å¦‚æœæ–‡æ¡£ä¸­å­˜åœ¨æ›´å¤šå…¶ä»–çš„å±æ€§ï¼Œå¦‚{\u0026quot;author\u0026quot;:\u0026quot;xilia\u0026quot;,\u0026quot;content\u0026quot;:\u0026quot;hello salta\u0026quot;,\u0026quot;hidden\u0026quot;:true}åˆ™è¿™ç§åŒ¹é…æ–¹å¼ä¸èƒ½æŸ¥è¯¢å‡ºå¯¹åº”çš„ç»“æœã€‚\ndb.game.find({\u0026#34;comments\u0026#34;:{ \u0026#34;author\u0026#34;:\u0026#34;xilia\u0026#34;, \u0026#34;content\u0026#34;:\u0026#34;hello salta\u0026#34; }}) æ›´é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œé™¤äº†éœ€è¦åŒ¹é…æ•´ä¸ªæ–‡æ¡£ä¹‹å¤–ï¼Œè¿™ç§æŸ¥è¯¢æ–¹å¼è¿˜æ˜¯å¼ºé¡ºåºç›¸å…³çš„ï¼Œä¸¤ä¸ªæ¡ä»¶çš„é¡ºåºå¿…é¡»ç¬¦åˆè¦æ±‚æ‰èƒ½æˆåŠŸåŒ¹é…ã€‚\nåœ¨è¿™ä¸­æƒ…å†µä¸‹ï¼Œéœ€è¦ä½¿ç”¨ç‚¹è°ƒç”¨1çš„æ–¹å¼\ndb.game.find({ \u0026#34;comments.author\u0026#34;:\u0026#34;xilia\u0026#34;, \u0026#34;comments.content\u0026#34;:\u0026#34;hello salta\u0026#34; }) æ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find({\u0026#34;comments\u0026#34;:{ ... \u0026#34;author\u0026#34;:\u0026#34;xilia\u0026#34;, ... \u0026#34;content\u0026#34;:\u0026#34;hello salta\u0026#34; ... }}) \u0026gt; db.game.find({ ... \u0026#34;comments.author\u0026#34;:\u0026#34;xilia\u0026#34;, ... \u0026#34;comments.content\u0026#34;:\u0026#34;hello salta\u0026#34; ... }) { \u0026#34;_id\u0026#34; : 1, \u0026#34;name\u0026#34; : \u0026#34;monster hunter: world\u0026#34;, \u0026#34;price\u0026#34; : 128, \u0026#34;platform\u0026#34; : [ \u0026#34;steam\u0026#34; ], \u0026#34;comments\u0026#34; : [ { \u0026#34;author\u0026#34; : \u0026#34;xilia\u0026#34;, \u0026#34;content\u0026#34; : \u0026#34;hello salta\u0026#34;, \u0026#34;hidden\u0026#34; : true }, { \u0026#34;author\u0026#34; : \u0026#34;salta\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; } ] } $whereæŸ¥è¯¢ å¯¹äºæœ‰äº›ç‰¹æ®Šçš„æŸ¥è¯¢ï¼Œæ— æ³•é€šè¿‡ä»¥ä¸Šä»»ä½•ä¸€ç§æ–¹å¼è¡¨ç¤ºå‡ºæ¥ï¼ŒmongoDBæä¾›äº†$whereå­å¥è¿™ç§æŸ¥è¯¢æ–¹å¼ã€‚$whereå­å¥å…è®¸åœ¨æŸ¥è¯¢ä¸­æ‰§è¡ŒJavaScriptä»£ç ï¼Œè¿™æ ·å°±èƒ½åœ¨JavaScriptä»£ç ä¸­æ‰§è¡ŒæŸäº›ç‰¹æ®Šçš„æ¯”è¾ƒé€»è¾‘ã€‚ä½†æ˜¯ä¸ºäº†å®‰å…¨å’Œæ•ˆç‡çš„è¦æ±‚ï¼Œåº”è¯¥å°½é‡å‡å°‘æˆ–æ¶ˆé™¤ä½¿ç”¨$whereï¼Œå¹¶ä¸”ç¦æ­¢æ™®é€šç”¨æˆ·ä½¿ç”¨ã€‚\nåœ¨$whereæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªæ–‡æ¡£éƒ½å¿…é¡»ä»BSONè½¬æ¢æˆJavaScriptå¯¹è±¡ï¼Œè€Œä¸”$whereæŸ¥è¯¢ä¹Ÿä¸èƒ½ä½¿ç”¨ç´¢å¼•ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤§çš„æ€§èƒ½é—®é¢˜ã€‚\nå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\n/** * æŸ¥è¯¢æ–‡æ¡£ä¸­å­˜åœ¨ä¸¤ä¸ªå­—æ®µæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š * 1.å…¶ä¸­ä¸€ä¸ªå­—æ®µæ˜¯æ—¥æœŸç±»å‹ï¼Œå¹¶ä¸”æ—¶é—´åœ¨å½“å‰æ—¥æœŸä¹‹å‰ï¼› * 2.å¦ä¸€ä¸ªå­—æ®µæ˜¯æ•°å­—ç±»å‹ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°å­—å°äº300ã€‚ */ db.game.find({\u0026#34;$where\u0026#34;:function(){ for(var param_1 in this){ for(var param_2 in this){ return this[param_1]\u0026lt;new Date() \u0026amp;\u0026amp; this[param_2]\u0026lt;300; } } return false; }}).pretty() æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š\n\u0026gt; db.game.find({\u0026#34;$where\u0026#34;:function(){ ... for(var param_1 in this){ ... for(var param_2 in this){ ... return this[param_1]\u0026lt;new Date() \u0026amp;\u0026amp; this[param_2]\u0026lt;300; ... } ... } ... return false; ... }}).pretty() { \u0026#34;_id\u0026#34; : 1, \u0026#34;name\u0026#34; : \u0026#34;monster hunter: world\u0026#34;, \u0026#34;price\u0026#34; : 128, \u0026#34;platform\u0026#34; : [ \u0026#34;steam\u0026#34; ], \u0026#34;comments\u0026#34; : [ { \u0026#34;author\u0026#34; : \u0026#34;xilia\u0026#34;, \u0026#34;content\u0026#34; : \u0026#34;hello salta\u0026#34;, \u0026#34;hidden\u0026#34; : true }, { \u0026#34;author\u0026#34; : \u0026#34;salta\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; }, { \u0026#34;author\u0026#34; : \u0026#34;link\u0026#34; } ] } æ¸¸æ ‡ æ¸¸æ ‡åŸºç¡€ find()æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ¸¸æ ‡å¯¹è±¡ï¼Œé€šè¿‡å¯¹æ¸¸æ ‡å¯¹è±¡çš„å„ç§æ“ä½œï¼Œå¯ä»¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œè¾“å‡ºæ§åˆ¶ã€‚ï¼ˆåœ¨mongoDBshellä¸­æ‰§è¡Œfind()æ–¹æ³•çš„æ‰“å°æ“ä½œæ˜¯shellè‡ªåŠ¨æ‰§è¡Œçš„ç»“æœï¼‰æ¸¸æ ‡å¯¹è±¡æä¾›äº†hasNex()å’Œnext()ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¸å‹çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼š\nvar cursor=db.game.find() while(cursor.hasNext()){ var item=cursor.next() print(item.name) } åŒæ—¶æ¸¸æ ‡å¯¹è±¡ä¹Ÿå®ç°äº†è¿­ä»£å™¨æ¥å£ï¼Œå¯ä»¥åœ¨forEach()æ–¹æ³•ä¸­è¿›è¡Œæ“ä½œï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š\nvar cursor=db.game.find(); cursor.forEach(res=\u0026gt;{ print(res.name) }) æ³¨æ„ï¼šå½“è°ƒç”¨find()æ–¹æ³•æ—¶ï¼Œshellå¹¶ä¸ä¼šç«‹å³æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œè€Œæ˜¯çœŸæ­£å¼€å§‹è·å–ç»“æœæ—¶æ‰æ‰§è¡ŒæŸ¥è¯¢æ“ä½œã€‚æ‰€ä»¥å¯ä»¥åœ¨æŸ¥è¯¢ä¹‹å‰è¿›è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œå¦‚ï¼šæ’åºã€åˆ†é¡µã€é™åˆ¶é•¿åº¦ç­‰ï¼Œè¿™äº›æ“ä½œçš„è¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ªæ¸¸æ ‡å¯¹è±¡ã€‚\nå› æ­¤ï¼Œä»¥ä¸‹ä¸‰è¡Œä»£ç è¿”å›çš„æ•°æ®ç›¸åŒï¼š\ndb.game.find().sort({\u0026#34;price\u0026#34;:1}).limit(3).skip(2).pretty(); db.game.find().sort({\u0026#34;price\u0026#34;:1}).skip(2).limit(3).pretty(); db.game.find().limit(3).sort({\u0026#34;price\u0026#34;:1}).skip(2).pretty(); db.game.find().limit(3).skip(2).sort({\u0026#34;price\u0026#34;:1}).pretty(); db.game.find().skip(2).limit(3).sort({\u0026#34;price\u0026#34;:1}).pretty(); db.game.find().skip(2).sort({\u0026#34;price\u0026#34;:1}).limit(3).pretty(); å½“hasNext()æ–¹æ³•è¢«è°ƒç”¨åï¼ŒæŸ¥è¯¢æ¡ä»¶ä¼šå‘é€åˆ°æœåŠ¡ç«¯ï¼Œä¹‹åshellä¼šè·å–ä¸€æ®µæŸ¥è¯¢ç»“æœï¼ˆè¿™é‡Œçš„ä¸€æ®µæ˜¯100ä¸ªç»“æœæˆ–4MBæ•°æ®ä¸­çš„è¾ƒå°å€¼ï¼‰ï¼Œåœ¨å®¢æˆ·ç«¯éå†å®Œè¿™äº›æ•°æ®åï¼Œshellä¼šå†æ¬¡é“¾æ¥æ•°æ®åº“ï¼Œä½¿ç”¨getMoreè·å–æ›´å¤šæ•°æ®ã€‚\nlimit()ã€skip()ã€sort() è¿™ä¸‰ä¸ªå‡½æ•°çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\n//é™åˆ¶åªè¿”å›ä¸‰ä¸ªç»“æœ db.game.find().limit(3) //è·³è¿‡å‰ä¸‰æ¡æ•°æ® db.game.find().skip(3) //æŒ‰ä»·æ ¼å‡åºæ’åºï¼Œ-1è¡¨ç¤ºé™åº db.game.find().sort({\u0026#34;price\u0026#34;:1}) ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•å¯ä»¥ç»“åˆä½¿ç”¨ã€‚å¯¹äºä¸€ä¸ªå­—æ®µçš„æ•°æ®åŒ…å«å¤šç§ç±»å‹æ—¶ï¼ŒmongoDBé¢„è®¾äº†æ’åºé¡ºåºï¼Œä»æœ€å°å€¼åˆ°æœ€å¤§å€¼é¡ºåºä¸ºï¼š\nåºå· ç±»å‹ 1 æœ€å°å€¼ 2 null 3 æ•°å­— 4 å­—ç¬¦ä¸² 5 å¯¹è±¡ã€æ–‡æ¡£ 6 æ•°ç»„ 7 äºŒè¿›åˆ¶æ•°æ® 8 å¯¹è±¡ID 9 å¸ƒå°” 10 æ—¥æœŸ 11 æ—¶é—´æˆ³ 12 æ­£åˆ™è¡¨è¾¾å¼ 13 æœ€å¤§å€¼ æ³¨æ„ï¼šå½“skip()æ–¹æ³•è·³è¿‡å¤§é‡æ•°æ®æ—¶ä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥å¯¹äºå¤§æ•°æ®é‡çš„åˆ†é¡µæ“ä½œï¼Œé€šå¸¸ä¸ç”¨skip()æ–¹æ³•å®ç°ã€‚å‡è®¾æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨create_dateå­—æ®µé™åºæ’åˆ—ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ“ä½œï¼š\nvar page_1=db.game.find().sort({\u0026#34;create_date\u0026#34;:-1}).limit(20); var latest=null; while(page_1.hasNext()){ latest=page_1.next(); //do sth } var page_2=db.game.find({ \u0026#34;create_date\u0026#34;:{\u0026#34;$lt\u0026#34;:latest.create_date} }).sort({\u0026#34;create_date\u0026#34;:-1}).limit(100) æ¸¸æ ‡çš„ç”Ÿå‘½å‘¨æœŸ ä¸€ä¸ªæ¸¸æ ‡ä¼šå ç”¨æœåŠ¡å™¨çš„èµ„æºï¼Œåœ¨æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ä¹‹åï¼ŒæœåŠ¡ç«¯ä¼šé‡Šæ”¾è¿™ä¸ªæ¸¸æ ‡çš„èµ„æºï¼Œè¿™äº›æ¡ä»¶åŒ…æ‹¬ï¼š\næ¸¸æ ‡éå†å®Œæ‰€æœ‰çš„ç»“æœ å®¢æˆ·ç«¯è¦æ±‚ç»ˆæ­¢è¯¥æ¸¸æ ‡ å½“æ¸¸æ ‡è¶…å‡ºå®¢æˆ·ç«¯çš„ä½œç”¨åŸŸï¼Œé©±åŠ¨ç¨‹åºä¼šå‘æ•°æ®åº“å‘é€ä¸€æ¡ â€œå¯ä»¥é”€æ¯è¯¥æ¸¸æ ‡â€ çš„æ¶ˆæ¯ ä¸€ä¸ªæ¸¸æ ‡å¦‚æœ10åˆ†é’Ÿå†…æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨é”€æ¯ ","permalink":"https://liiqii.github.io/posts/tech/mongo/mongo_query/","summary":"æ•°æ®æŸ¥è¯¢ find()æ–¹æ³• æ–¹æ³•è¯´æ˜ find()æ–¹æ³•æ²¡æœ‰å‚æ•°æ—¶ä¼šåŒ¹é…é›†åˆä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œfind({})å’Œfind()åŠŸèƒ½ä¸€æ · find({\u0026quot;_id\u0026quot;:1})è¡¨ç¤ºæŸ¥è¯¢_idå­—æ®µä¸º 1 çš„æ–‡æ¡£ï¼›find({\u0026quot;_id\u0026quot;:1,\u0026quot;name\u0026quot;","title":"mongo æŸ¥è¯¢"},{"content":"éšä¾¿æ¥ç‚¹ä»€ä¹ˆæµ‹è¯•ä¸€ä¸‹\n","permalink":"https://liiqii.github.io/posts/blog/blog/","summary":"éšä¾¿æ¥ç‚¹ä»€ä¹ˆæµ‹è¯•ä¸€ä¸‹","title":"å»ºç«™"},{"content":"éšä¾¿æ¥ç‚¹ä»€ä¹ˆæµ‹è¯•ä¸€ä¸‹\n","permalink":"https://liiqii.github.io/posts/life/life/","summary":"éšä¾¿æ¥ç‚¹ä»€ä¹ˆæµ‹è¯•ä¸€ä¸‹","title":"ç”Ÿæ´»"},{"content":"éšä¾¿æ¥ç‚¹ä»€ä¹ˆæµ‹è¯•ä¸€ä¸‹\n","permalink":"https://liiqii.github.io/posts/read/read/","summary":"éšä¾¿æ¥ç‚¹ä»€ä¹ˆæµ‹è¯•ä¸€ä¸‹","title":"é˜…è¯»"},{"content":"\rğŸ‘‰å‹é“¾æ ¼å¼\råç§°ï¼š XXXXXX ç½‘å€ï¼š https://liiqii.github.io/ å›¾æ ‡ï¼š https://liiqii.github.io/img/Q.gif æè¿°ï¼š XXXXXX ğŸ‘‰å‹é“¾ç”³è¯·è¦æ±‚\rç§‰æ‰¿äº’æ¢å‹é“¾åŸåˆ™ã€æ–‡ç« å®šæœŸæ›´æ–°ã€ä¸èƒ½æœ‰å¤ªå¤šå¹¿å‘Šã€ä¸ªäººæè¿°å­—æ•°æ§åˆ¶åœ¨15å­—å†…\n","permalink":"https://liiqii.github.io/links/","summary":"ğŸ‘‰å‹é“¾æ ¼å¼ åç§°ï¼š XXXXXX ç½‘å€ï¼š https://liiqii.github.io/ å›¾æ ‡ï¼š https://liiqii.github.io/img/Q.gif æè¿°ï¼š XXXXXX ğŸ‘‰å‹é“¾ç”³è¯·è¦æ±‚ ç§‰æ‰¿äº’æ¢å‹é“¾åŸåˆ™ã€æ–‡ç« å®šæœŸæ›´æ–°ã€ä¸èƒ½æœ‰å¤ªå¤šå¹¿å‘Šã€ä¸ªäººæè¿°å­—æ•°æ§åˆ¶åœ¨15å­—å†…","title":"ğŸ¤å‹é“¾"},{"content":"å…³äºæˆ‘\nè‹±æ–‡å: Klaus èŒä¸š: ç¨‹åºå‘˜ çˆ±å¥½: æ¸¸æˆ ","permalink":"https://liiqii.github.io/about/","summary":"å…³äºæˆ‘ è‹±æ–‡å: Klaus èŒä¸š: ç¨‹åºå‘˜ çˆ±å¥½: æ¸¸æˆ","title":"ğŸ™‹ğŸ»â€â™‚ï¸å…³äº"}]